<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Symfony Test</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <link rel="stylesheet"
        href="https://git.iquadrat.com/assets/fonts-3dcf267c9a9dc2c5b7a0ae5b757830104751a7ece87820521d6bb22dd665b2f8.css" />
    <style>
        h1 {
            font-size: 1.75em;
            font-weight: 600;
            margin: 24px 0 16px;
            padding-bottom: 0.3em;
            border-bottom: 1px solid #e6e6ea;
            color: #333238;
        }

        h2 {
            font-size: 1.5em;
            font-weight: 600;
            margin: 24px 0 16px;
            padding-bottom: 0.3em;
            border-bottom: 1px solid #e6e6ea;
            color: #333238;

        }

        pre {
            background-color: #272822;
            color: #f8f8f2;
            padding: 12px;
            margin-bottom: 16px;
            line-height: 1.6em;
            overflow-x: auto;
            border-radius: 4px;
        }

        code {
            padding: 2px 4px;
            color: #1f1e24;
            background-color: #ececef;
            border-radius: 4px;
        }

        pre>code {
            background-color: inherit;
            padding: unset;
        }
    </style>
</head>

<body>

    <div class="container">
        <div class="row">
            <div class="col">
                <h1>Symfony 5.4 Test</h1>
                <h2>Preparación del test</h2>
                <p>Mediante una serie de comandos utilizando la consola de Symfony (<code>php bin/console</code>),
                    preparemos el
                    test antes de empezar a programar.</p>
                <p><strong>A continuación debes ejecutar los siguientes comandos en el terminal compartido de esta
                        sesión:</strong>
                </p>
                <p>Crear la base de datos:</p>
                <pre><code>$ php bin/console doctrine:database:create</code></pre>
                <p>El <code>schema</code> de la base de datos:</p>
                <pre><code>$ php bin/console doctrine:schema:create</code></pre>
                <p>Debes generar los getters y los setters de las entidades:</p>
                <pre><code>$ php bin/console ¿?</code></pre>
                <p>Y cargar las fixtures (datos iniciales):</p>
                <pre><code>$ php bin/console ¿?</code></pre>
                <h2>Prueba nº 1</h2>
                <p>Debes implementar un listado de provincias en la ruta <code>/api/v1/provinces</code> del controlador
                    <code>ApiController</code>, lo haremos mediante la entidad <code>Province</code> de
                    <code>Doctrine</code>, el
                    listado debe cumplir los siguientes requisitos:
                </p>
                <ul>
                    <li>Salida en formato <code>json</code>
                    </li>
                    <li>Cada provincia debe tener los campos <code>id</code> y <code>name</code>
                    </li>
                    <li>Ordenado por <code>name</code>
                    </li>
                    <li>Debe pasar el test unitario <code>ProvinceTest</code>:
                        <pre><code>$ php bin/phpunit tests\ProvinceTest.php</code></pre>
                    </li>
                    <li>Debe pasar la validación <code>phpcs</code>:
                        <pre><code>$ composer cs</code></pre>
                    </li>
                    <li>Debe pasar la validación <code>phpstan</code>:
                        <pre><code>$ composer stan</code></pre>
                    </li>
                </ul>
                <h2>Prueba nº 2</h2>
                <p>Debes implementar el listado de las poblaciones de una provincia en la ruta
                    <code>/api/v1/provinces/{id}/towns</code> del controlador <code>ApiController</code>, lo haremos
                    mediante la
                    entidad <code>Town</code> de <code>Doctrine</code>, el listado debe cumplir los siguientes
                    requisitos:
                </p>
                <ul>
                    <li>Salida en formato <code>json</code>
                    </li>
                    <li>Cada población debe tener los campos <code>id</code>, <code>name</code> y <code>cp</code>
                    </li>
                    <li>Ordenado por <code>name</code>
                    </li>
                    <li>Debe pasar el test unitario <code>TownTest</code>:
                        <pre><code>$ php bin/phpunit tests\TownTest.php</code></pre>
                    </li>
                    <li>Debe pasar la validación <code>phpcs</code>:
                        <pre><code>$ composer cs</code></pre>
                    </li>
                    <li>Debe pasar la validación <code>phpstan</code>:
                        <pre><code>$ composer stan</code></pre>
                    </li>
                </ul>
                <h2>Prueba nº 3</h2>
                <p>Debes implementar la recepción de un mensaje en la ruta <code>/api/v1/message</code> del controlador
                    <code>ApiController</code> y almacenarlo en la base de datos, lo haremos mediante la entidad
                    <code>Message</code> de <code>Doctrine</code>, una vez almacenado se debe responder con un objeto
                    json con la
                    clave <code>message</code> y el valor del mensaje recibido.
                </p>
                <ul>
                    <li>Método HTTP <code>PUT</code>
                    </li>
                    <li>Dato de entrada <code>message</code>
                    </li>
                    <li>Retorno de la petición <code>json</code>
                        <pre><code>['message' =&gt; 'This is a test message with unique id: 62cf59e7d93e5']</code></pre>
                    </li>
                    <li>Debe pasar el test unitario <code>MessageTest</code>:
                        <pre><code>$ php bin/phpunit tests\MessageTest.php</code></pre>
                    </li>
                    <li>Debe pasar la validación <code>phpcs</code>:
                        <pre><code>$ composer cs</code></pre>
                    </li>
                    <li>Debe pasar la validación <code>phpstan</code>:
                        <pre><code>$ composer stan</code></pre>
                    </li>
                </ul>
                <h2>Prueba nº 4</h2>
                <p>Debes implementar el listado de los mensajes insertados en la prueba anterior ordenados por fecha de
                    creación, lo
                    haremos mediante la entidad <code>Message</code> de <code>Doctrine</code>.</p>
                <ul>
                    <li>Método HTTP <code>GET</code>
                    </li>
                    <li>Formato <code>json</code>
                    </li>
                    <li>Implementar el repositorio <code>MessageRepository</code>
                    </li>
                    <li>Ruta <code>/api/v1/messages</code>
                    </li>
                </ul>
                <h2>Prueba nº 5</h2>
                <p>Debes crear una nueva entidad <code>User</code> con los siguientes campos:</p>
                <ul>
                    <li>id</li>
                    <li>name</li>
                    <li>email</li>
                    <li>username</li>
                    <li>password</li>
                    <li>created_at</li>
                    <li>updated_at</li>
                </ul>
                <p>Y generar los getters y setters</p>
                <h2>Prueba nº 6</h2>
                <p>Debes crear un nuevo controlador <code>UserController</code> que implemente CRUD para la entidad
                    <code>User</code>. (<a
                        href="https://en.wikipedia.org/wiki/Create,_read,_update_and_delete">https://en.wikipedia.org/wiki/Create,_read,_update_and_delete</a>)
                </p>
                <h2>Prueba nº 7</h2>
                <p>Implementa un test unitario que verifique el correcto funcionamiento de las rutas del controlador
                    <code>UserController</code>.
                </p>

            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
        crossorigin="anonymous"></script>

</body>

</html>